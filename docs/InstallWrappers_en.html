<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Video Wrapper Installation Guide - DanmakuPIP</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        code {
            background-color: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            border: 1px solid #e9ecef;
        }
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #e9ecef;
            overflow-x: auto;
        }
        .step {
            background-color: #f8f9fa;
            border-left: 4px solid #27ae60;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        .note {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
            color: #155724;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Custom Video Wrapper Installation Guide</h1>
        
        <div class="note">
            <h2>About This Guide</h2>
            <p>Due to MediaStream constraints, enabling this extension will cause the seek bar to stop functioning in Firefox's PiP window.</p>
            <p>This guide explains how to fix this issue.</p>
        </div>

        <h2>STEP1 (omni.ja Patching)</h2>
        <div class="note">
            <p>This step is only required for regular Firefox.</p>
            <p>If you are using Firefox Nightly, Developer Edition, Floorp, Zen, Librewolf, or Waterfox, you can skip this step.</p>
        </div>

        <div class="step">
            <h3>1. Find the omni.ja path</h3>
            <p>omni.ja should be located directly under Firefox's installation directory.</p>
            <p>Common paths are as follows:</p>
            <pre><code>C:/Program Files/Mozilla Firefox/omni.ja
C:/Program Files (x86)/Mozilla Firefox/omni.ja
/Applications/Firefox.app/omni.ja
/usr/lib/firefox/omni.ja
/usr/lib64/firefox/omni.ja
/opt/firefox/omni.ja</code></pre>
            <p>You can also check Firefox's installation directory from the <code>about:support</code> page.</p>
        </div>

        <div class="step">
            <h3>2. Apply the patch</h3>
            <p>Download <a href="./omniPatcher.py"><code>omniPatcher.py</code></a> and run it as follows:</p>
            <pre><code>python omniPatcher.py /path/to/omni.ja</code></pre>
        </div>

        <div class="step">
            <h3>3. Clear startup cache</h3>
            <p>To reflect the changes, open <code>about:support</code> and clear the startup cache from the button in the top right.</p>
        </div>

        <h2>STEP2 (about:config Changes)</h2>

        <div class="step">
            <h3>1. Open about:config</h3>
            <p>Type <code>about:config</code> in the address bar.</p>
        </div>

        <div class="step">
            <h3>2. Change values</h3>
            <p>Make sure both <code>xpinstall.signatures.required</code> and <code>extensions.experiments.enabled</code> are set to <code>false</code>.</p>
            <p>If they are not, change them. If the items don't exist, create boolean values.</p>
        </div>

        <h2>STEP3 (Custom Video Wrappers Installation)</h2>

        <div class="step">
            <h3>1. Download the wrappers</h3>
            <p>Download and save <a href="./customWrappers.xpi"><code>customWrappers.xpi</code></a>.</p>
            <p>This file is a fork of Firefox's internal extension. Unlike the extension itself, it is licensed under MPL.</p>
        </div>

        <div class="step">
            <h3>2. Install</h3>
            <p>Open <code>about:addons</code> and drag and drop the downloaded wrapper extension to install it.</p>
        </div>

        <div class="step">
            <h3>3. Restart the browser</h3>
        </div>

        <div class="success">
            <h3>Great job!</h3>
            <p>After installation, restart Firefox and you should see the seek bar in the PiP window even when this extension is enabled.</p>
        </div>
    </div>
</body>
</html>
