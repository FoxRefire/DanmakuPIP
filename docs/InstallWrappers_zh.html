<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自訂影片包裝器安裝指南 - DanmakuPIP</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', 'PingFang TC', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        code {
            background-color: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            border: 1px solid #e9ecef;
        }
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #e9ecef;
            overflow-x: auto;
        }
        .step {
            background-color: #f8f9fa;
            border-left: 4px solid #27ae60;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        .note {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
            color: #155724;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>自訂影片包裝器安裝指南</h1>
        
        <div class="note">
            <h2>關於本指南</h2>
            <p>由於MediaStream的限制，啟用此擴充功能會導致Firefox的PiP視窗中的搜尋列無法正常運作。</p>
            <p>本指南說明如何修復此問題。</p>
        </div>

        <h2>步驟1 (omni.ja修補)</h2>
        <div class="note">
            <p>此步驟僅適用於一般版Firefox。</p>
            <p>如果您使用Firefox Nightly、Developer Edition、Floorp、Zen、Librewolf或Waterfox，可以跳過此步驟。</p>
        </div>

        <div class="step">
            <h3>1. 找到omni.ja路徑</h3>
            <p>omni.ja應該位於Firefox安裝目錄的直屬位置。</p>
            <p>常見路徑如下：</p>
            <pre><code>C:/Program Files/Mozilla Firefox/omni.ja
C:/Program Files (x86)/Mozilla Firefox/omni.ja
/Applications/Firefox.app/omni.ja
/usr/lib/firefox/omni.ja
/usr/lib64/firefox/omni.ja
/opt/firefox/omni.ja</code></pre>
            <p>您也可以從<code>about:support</code>頁面檢查Firefox的安裝目錄。</p>
        </div>

        <div class="step">
            <h3>2. 執行修補</h3>
            <p>下載<a href="./omniPatcher.py"><code>omniPatcher.py</code></a>並按以下方式執行：</p>
            <pre><code>python omniPatcher.py /path/to/omni.ja</code></pre>
        </div>

        <div class="step">
            <h3>3. 清除啟動快取</h3>
            <p>為了反映變更，請開啟<code>about:support</code>並從右上角的按鈕清除啟動快取。</p>
        </div>

        <h2>步驟2 (about:config的變更)</h2>

        <div class="step">
            <h3>1. 開啟about:config</h3>
            <p>在網址列中輸入<code>about:config</code>。</p>
        </div>

        <div class="step">
            <h3>2. 變更數值</h3>
            <p>確認<code>xpinstall.signatures.required</code>和<code>extensions.experiments.enabled</code>兩者的數值都設定為<code>false</code>。</p>
            <p>如果沒有，請變更它們。如果項目不存在，請建立布林值。</p>
        </div>

        <h2>步驟3 (自訂影片包裝器的安裝)</h2>

        <div class="step">
            <h3>1. 下載包裝器</h3>
            <p>下載並儲存<a href="./customWrappers.xpi"><code>customWrappers.xpi</code></a>。</p>
            <p>這個檔案是Firefox內部擴充功能的分叉。與擴充功能本身不同，它以MPL許可證發布。</p>
        </div>

        <div class="step">
            <h3>2. 安裝</h3>
            <p>開啟<code>about:addons</code>並拖曳下載的包裝器擴充功能來安裝。</p>
        </div>

        <div class="step">
            <h3>3. 重新啟動瀏覽器</h3>
        </div>

        <div class="success">
            <h3>辛苦了！</h3>
            <p>安裝後，重新啟動Firefox，即使啟用此擴充功能，PiP視窗中也應該會顯示搜尋列。</p>
        </div>
    </div>
</body>
</html>
